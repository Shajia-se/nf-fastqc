// =========================
// nf-fastqc minimal config
// =========================

params {
  // ---- pipeline-specific ----
  fastqc_raw_data  = "$PWD/test_data"                  // input FASTQ directory
  project_folder   = "$PWD"                            // where to publish results
  fastqc_output    = "fastqc_output"                   // subfolder name

  // Singularity image
  container_fastqc = "$HOME/singularity_image/fastqc-0.11.9.sif"

  // default resources for FastQC
  cpus   = 4
  memory = '8GB'
  time   = '2h'

  // optional extra singularity mounts (usually empty)
  extra_mounts = ''
}

// -------------
// Global setup
// -------------
process {
  executor = 'slurm'

  // HMGU default: cpu_p + cpu_normal QoS
  queue          = 'cpu_p'
  clusterOptions = '--qos=cpu_normal --nice=10000'

  // resources (can be overridden per-process if needed)
  cpus   = params.cpus
  memory = params.memory
  time   = params.time

  // container
  container        = params.container_fastqc
  containerOptions = params.extra_mounts
}

// use Singularity everywhere
singularity {
  enabled    = true
  autoMounts = true
}

// clean work dirs after successful run
cleanup = true

// -------------
// Profiles
// -------------
profiles {

  // main profile for Helmholtz HPC
  hpc {
    // inherit everything from global `process {}` above
  }

  // optional: run locally for quick tests (no Slurm)
  local {
    process {
      executor = 'local'
      queue    = 'localna'
      container = params.container_fastqc
    }
  }

  // optional: keep work/ dirs for debugging
  debug {
    cleanup = false
  }
}
